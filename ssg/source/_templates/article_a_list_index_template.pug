extends /_templates/layout.pug
include /_templates/mixins.pug



block content

    if self.publish
        - var currentTime = new Date()
            if typeof(self.publishFrom) === 'undefined'
                - var publishFrom= new Date(self.created_at)
            else
                - var publishFrom= new Date(self.publishFrom)

            if self.publishUntil
                - var publishUntil = new Date(self.publishUntil)

            if (currentTime > publishFrom)
                if (!publishUntil || (publishUntil && (publishUntil > currentTime)))

                    - var splitSelfPath = self.path.split("/")[self.path.split("/").length-1]

                    if self.title
                        +tabname(self.title)

                    section.padding_top_header
                        section.ss_hero_head
                            .container_frame_square
                                if self.media && self.media.image && self.media.image[0]
                                    img(src=`https://assets.poff.ee/img/${self.media.image[0].hash}${self.media.image[0].ext}`).ss_hero_image.container_contents_square
                                else if self.media && self.media.imageDefault && self.media.imageDefault[0]
                                    img(src=`https://assets.poff.ee/img/${self.media.imageDefault[0].hash}${self.media.imageDefault[0].ext}`).ss_hero_image.container_contents_square
                                else
                                    img(src='/assets/img/static/placeholder_hd_1.jpg').ss_hero_image.container_contents_square
                            if self.title
                                .ss_hero_headline_box
                                    .ss_title_detailed
                                        span= self.title

                    section.grid_article.padding_top_4
                        section.article_meta
                            .str_info_meta_gi
                                    //- if self.articleType
                                    //-     .str_info_meta_item
                                    //-         .str_info_meta_value.dark_1= self.articleType

                                    //- if self.web_authors
                                    //-     .str_info_meta_item
                                    //-         - var authors = []
                                    //-         each author in self.web_authors
                                    //-             - authors.push(author.name)
                                    //-         .str_info_meta_value.dark_1= authors.join(', ')
                                    //- else
                                    //-     .str_info_meta_item
                                    //-         .str_info_meta_value.dark_1= `${self.created_by.firstname} ${self.created_by.lastname}`

                                    //- if self.publishFrom
                                    //-     .str_info_meta_item
                                    //-         .str_info_meta_value.dark_1
                                    //-             +localdatetime(self.publishFrom)
                                    //- else
                                    //-     .str_info_meta_item
                                    //-         .str_info_meta_value.dark_1
                                    //-             +localdatetime(self.created_at)

                                    .str_info_meta_item
                                        - var tagsList = []
                                        if self.tag_premiere_types
                                            - self.tag_premiere_types.forEach(element => tagsList.push(element));
                                        if self.tag_programmes
                                            - self.tag_programmes.forEach(element => tagsList.push(element));
                                        if self.tag_genres
                                            - self.tag_genres.forEach(element => tagsList.push(element));
                                        if self.tag_keywords
                                            - self.tag_keywords.forEach(element => tagsList.push(element));

                                        if tagsList.length > 0
                                            .str_info_meta_keywords.ghost_blue= tagsList.join(', ')


                        section.article_contents.dark_1
                            if typeof(self.lead) !== 'object'
                                +format(self.lead).font_weight_600.dark_1
                            //- if self.lead
                            //-     p.font_weight_500.dark_1= self.lead
                            //- p= self.articleContents_et
                            if typeof(self.contents) !== 'object'
                                +format(self.contents).dark_1


                        section.article_extra
